!function(e,r){var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],r.bind(null,t)):define(["jquery"],r);else if("object"==typeof exports)module.exports=r(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e.setIframeHeight=r(t)}}(this,function(e){function r(r){var a=null;return e("iframe").each(function(n,f){var d=e(f),o=d.attr("data-iframeAutoHeight-currentSrc")||f.src;o&&(0===o.indexOf("/")&&(o=i(document.location.href)+o),o===r&&(a=f)),d.data("setIframeHeight_id")||d.data("setIframeHeight_id",t())}),a}function t(){return++c+""}function i(e){var r=e.match(/https?:\/\/.[^/]+/)||[];return r[0]}function a(e){return e.replace(/^https?:\/\//,"//")}function n(t,i){var n=r(i.iframeSrc);if(!n&&i.iframeReferrer&&(n=r(i.iframeReferrer)),n){var f=e(n),d=e(window);f.height(i.height),a(n.src)!==a(i.iframeSrc)&&f.attr("data-iframeAutoHeight-currentSrc",i.iframeSrc),iframeId=f.data("setIframeHeight_id");var c=o[iframeId],h=i.height;if(void 0===c?d.trigger("setIframeHeight:determined",i):c>h?d.trigger("setIframeHeight:shrinked",i):h>c&&e(window).trigger("setIframeHeight:enlarged",i),o[iframeId]=h,window.history.replaceState&&f.attr("data-iframeAutoHeight-deepLinkPattern")&&f.attr("data-iframeAutoHeight-currentSrc")){var g=f.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(i.iframeSrc));a(document.location.href)!==a(g)&&(window.history.replaceState({},"",g),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:i.iframeSrc,parentUrl:g}),n.contentWindow&&n.contentWindow.postMessage&&n.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+g+'", "childUrl": "'+i.iframeUrl+'"}',"*"))}}}function f(r){var t=r.originalEvent.data;if(t.indexOf("::")){var t=t.split("::");if(2===t.length&&"setIframeHeight"===t[0]){var i=e.parseJSON(t[1]);d.setHeight(i.iframeSrc,i.height,i.iframeReferrer)}}}e(window).bind("setIframeHeight",n).bind("message",f);var d={setHeight:function(r,t,i){t=parseInt(t,10),e(window).trigger("setIframeHeight",[{iframeSrc:r,height:t,iframeReferrer:i}])}},o={},c=0;return d});