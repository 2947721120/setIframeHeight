!function(e,r){"use strict";var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],r.bind(null,t)):define(["jquery"],r);else if("object"==typeof exports)module.exports=r(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e.setIframeHeight=r(t)}}(this,function(e){"use strict";function r(r){var t=null;return e("iframe").each(function(a,n){var f=e(n),d=f.attr("data-iframeAutoHeight-currentSrc")||n.src;return d&&(0===d.indexOf("/")&&(d=i(document.location.href)+d),d===r)?(t=n,!1):void 0}),t}function t(r){var t=null;return e("iframe").each(function(i,a){var n=e(a);return n.data("setIframeHeight_id")===r?(t=a,!1):void 0}),t}function i(e){var r=e.match(/https?:\/\/.[^/]+/)||[];return r[0]}function a(e){return e.replace(/^https?:\/\//,"//")}function n(i,n){var f;if(f=t(n.iframeId),f||(f=r(n.iframeSrc)),!f&&n.iframeReferrer&&(f=r(n.iframeReferrer)),f){var d=e(f),c=e(window);d.data("setIframeHeight_id",n.iframeId),d.height(n.height);var h=a(d.attr("data-iframeAutoHeight-currentSrc")||f.src)!==a(n.iframeSrc);d.attr("data-iframeAutoHeight-currentSrc",n.iframeSrc);var g=o[n.iframeId],s=n.height;if(void 0===g?c.trigger("setIframeHeight:determined",n):g>s?c.trigger("setIframeHeight:shrinked",n):s>g&&e(window).trigger("setIframeHeight:enlarged",n),o[n.iframeId]=s,window.history.replaceState&&d.attr("data-iframeAutoHeight-deepLinkPattern")&&h){var u=d.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(n.iframeSrc));a(document.location.href)!==a(u)&&(window.history.replaceState({},"",u),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:n.iframeSrc,parentUrl:u})),f.contentWindow&&f.contentWindow.postMessage&&f.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+u+'", "childUrl": "'+n.iframeSrc+'"}',"*")}}}function f(r){var t=r.originalEvent.data;if(t.indexOf("::")){var t=t.split("::");if(2===t.length&&"setIframeHeight"===t[0]){var i=e.parseJSON(t[1]);d.setHeight(i)}}}e(window).bind("setIframeHeight",n).bind("message",f);var d={setHeight:function(r){r.height=parseInt(r.height,10),e(window).trigger("setIframeHeight",[r])}},o={};return d});