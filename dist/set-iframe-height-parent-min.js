!function(e,t){var r=e.jQuery;if("function"==typeof define&&define.amd)r?define([],t.bind(null,r)):define(["jquery"],t);else if("object"==typeof exports)module.exports=t(r?r:require("jquery"));else{if(!r)throw"Missing required jQuery dependency";e.setIframeHeight=t(r)}}(this,function(e){function t(t){var r=null;return e("iframe").each(function(n,f){var d=e(f),o=d.attr("data-iframeAutoHeight-currentSrc")||f.src;return o&&(0===o.indexOf("/")&&(o=a(document.location.href)+o),o===t)?(d.data("setIframeHeight_id")||d.data("setIframeHeight_id",i()),r=f,!1):void 0}),r}function r(t){var r=null;return e("iframe").each(function(i,a){var n=e(a);return n.data("setIframeHeight_id")===t?(r=a,!1):void 0}),r}function i(){return++h+""}function a(e){var t=e.match(/https?:\/\/.[^/]+/)||[];return t[0]}function n(e){return e.replace(/^https?:\/\//,"//")}function f(i,a){var f;if(a.iframeId&&(f=r(a.iframeId)),f||(f=t(a.iframeSrc)),!f&&a.iframeReferrer&&(f=t(a.iframeReferrer)),f){var d=e(f),o=e(window);d.height(a.height);var h=n(d.attr("data-iframeAutoHeight-currentSrc")||f.src)!==n(a.iframeSrc);d.attr("data-iframeAutoHeight-currentSrc",a.iframeSrc),iframeId=d.data("setIframeHeight_id");var m=c[iframeId],s=a.height;if(void 0===m?o.trigger("setIframeHeight:determined",a):m>s?o.trigger("setIframeHeight:shrinked",a):s>m&&e(window).trigger("setIframeHeight:enlarged",a),c[iframeId]=s,iframeId!==a.iframeId&&f.contentWindow&&f.contentWindow.postMessage&&f.contentWindow.postMessage('setIframeHeight:setIframeId::{ "iframeId": "'+iframeId+'"}',"*"),window.history.replaceState&&d.attr("data-iframeAutoHeight-deepLinkPattern")&&h){var g=d.attr("data-iframeAutoHeight-deepLinkPattern").replace(/%deepLinkIframeSrc%/,encodeURIComponent(a.iframeSrc));n(document.location.href)!==n(g)&&(window.history.replaceState({},"",g),e(window).trigger("setIframeHeight:deepLink:changed",{childUrl:a.iframeSrc,parentUrl:g}),f.contentWindow&&f.contentWindow.postMessage&&f.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+g+'", "childUrl": "'+a.iframeUrl+'"}',"*"))}}}function d(t){var r=t.originalEvent.data;if(r.indexOf("::")){var r=r.split("::");if(2===r.length&&"setIframeHeight"===r[0]){var i=e.parseJSON(r[1]);o.setHeight(i)}}}e(window).bind("setIframeHeight",f).bind("message",d);var o={setHeight:function(t){t.height=parseInt(t.height,10),e(window).trigger("setIframeHeight",[t])}},c={},h=0;return o});